<!DOCTYPE html>
<html>
	<head>
		<title>explodi</title>

		<!-- iOS settings -->
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="viewport" content="user-scalable=no, width=device-width" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<link rel="apple-touch-startup-image" href="cover.png" />
		<link rel="apple-touch-icon" href="explodi114.png" />
		
		<script type="text/javascript">
// --- game configuration parameters begin ---
var cfg = {
	// app name, do not edit
	name:'explodi', 
	// app version
	version:'1.1', 
	// game mode id for highscore storage, do not edit
	gameMode:'normal',
	// number of columns
	nCols: 12, 
	// number of rows
	nRows: 15,
	// animation resolution in ms
	animationRes: 20,
	// timeout time for network requests in ms
	netTimeout: 4000,
	// colors of the dots
	colors: [ "#e08040", "#804", "#eda", "#6b6" ]
}
// --- game configuration parameters end ---
		</script>
		<script type="text/javascript" src="l10n.en.js"></script>		
		<script type="text/javascript" src="eludi.js"></script>
		<script type="text/javascript" src="explodi.js"></script>
		<link rel="stylesheet" type="text/css" href="emenu.css"/>
		<link rel="stylesheet" type="text/css" href="eludi.mobile.css"/>
		<style type="text/css">
body {
	font-size:13px;
	background:#333;
}
/*---------------------------------------------*/
#paneTopContent {
	position:relative;
	max-width:960px;
	margin:0 auto;
}
#title {
	font-size:20px;
	margin:7px 0;
}
#xlinks { 
	display:none; 
	font-weight:bold;
	color:#804020;
}
#xlinks a {
	color:#804020;
}
 #xlinks a:hover {
	color:#ffddaa;
}
#xlinks a:before {
	content:"\00A0\2022\00A0 ";
	color:#804020;
}
.stats {
	position:absolute;
	right:32px; top:0;
	font-size:14px;
}
ul.controls li {
	min-width:32px;
}
/*---------------------------------------------*/
.controls_desktop tr {
	color:#ffddaa;
	opacity: .7;
	filter: alpha(opacity=70);
	-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=70)";
	zoom:1;
	
}
.controls_desktop tr:hover {
	opacity: 1.0;
	filter: alpha(opacity=100);
	-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
	cursor: pointer;
}
.controls_desktop td {
	padding:16px 0;
}
.controls_desktop img { 
	border-width: 0;
	margin-right: 8px;
	vertical-align: middle;
	height:48px;
}

/*---------------------------------------------*/
#paneAds_mobile {
	height: 50px;
	background:black;
}
#panesCenter {
	margin:0 auto;
}
#controls_desktop {
	vertical-align: top;
	margin-top:16px;
	width:130px;
 }
#paneAds_desktop {
	vertical-align: top;
	margin:16px 0 0 10px;
	width:120px;
 }
#paneCenter {
	display:inline-table;
}
#screen_game {
	position:relative; 
	border:none;
	padding:0;
	overflow:hidden;
	 background-image: url("fondo.png");
}
#screen_game div {
	position:absolute; 
	margin:1px;
	display:table;	
	text-align:center;
	font-weight:bold;
	color:black;
}
#screen_game p {
	margin:0;
	display:table-cell;
	vertical-align:middle;
}
#overlay {
	position:absolute; 
	left:0; top:0;
}
#screen_scores, #screen_help {
	max-width:400px;
	margin: 0 auto;
}
#screen_over, #screen_scoreSubmit {
	width:232px;
	padding:4px;
	border-radius:12px;
	-webkit-border-radius: 12px;
	
	text-align:center; 
	background:rgba(0,0,0,0.66);
}
#screen_over p, #screen_scoreSubmit p {
	margin:0;
}
.imgbutton {
	opacity: 0.8;
}
.imgbutton:hover {
	opacity: 1.0;
	zoom:1;
	cursor: pointer;
}
.noselect {
	cursor: default;
	-moz-user-select: none;
	-khtml-user-select: none;
	-webkit-user-select: none;
	user-select: none;
}
/*---------------------------------------------*/
#paneBottom {
	width:100%;
	display: none;
	position:absolute;
}
#paneBottomContent {
	max-width:960px;
	margin:0 auto;
}
/*---------------------------------------------*/
ul.vmenu {
	margin: 0;
	padding:0;
}
.vmenu li {
	margin: 4px 0 0;
	-webkit-border-radius: 8px;
	-moz-border-radius: 8px;
	border-radius:8px;
	padding: 4px;

	list-style-type: none;
	font-weight:bold;
	text-align:left;
	color:#ffddaa;	
	background-color: rgb(224,128,64);
	filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e08040', endColorstr='#804020'); /* for IE */
	background: -webkit-gradient(linear, left top, left bottom, from(#e08040), to(#804020));
	background: -moz-linear-gradient(top,  #e08040,  #804020);	
	opacity: 0.8;
}
.vmenu li:hover {
	opacity: 1.0;
	zoom:1;
	cursor: pointer;
}
.vmenu img {
	height:48px;
	vertical-align: middle;
	padding: 0 1em 0 0;
}
input#inputName {
	width:220px;
	height:40px; 
	margin: 4px 0 0; 
	border:2px silver solid; 
	border-radius:8px; 
	padding: 4px; 
	font-size:16px; 
	font-weight:bold;
	background: white;
}
/*---------------------------------------------*/
@media (max-device-width: 800px) { /* mobile */
	div#controls_desktop { display:none; }
	div#paneAds_desktop { display:none; }
}
@media (min-device-width: 801px) { /* desktop */
	div#paneTop { padding:4px 0; min-width:600px; }
	div#paneCenter { margin:4px auto; }
	#paneBottom { display:block; min-width:600px; }
	div#paneAds_mobile { display:none; }
	ul#controls_mobile { display:none; }
	div#controls_desktop { display:inline-table; }
	div#paneAds_desktop { display:inline-table; }
	#xlinks { display:inline; }
	#title:before { content:"\00BB\00A0 " }
}
		</style>
	</head>
	<body><div id="panes"
		><div id="paneTop">
			<div id="paneTopContent">
				<span id="paneTopLeft" style="white-space:nowrap;">


					<span id="xlinks" style="display:none;"></span>
				</span>
				<ul class="stats">
					<li class="l10n">score</li><li id="statScore">0</li>
				</ul>
				<ul id="controls_mobile" class="controls" style="position:absolute; right:0; top:0;"
					><li id="button_help"  onclick="app.switchTo('help');"><img src="resource/question.png" style="margin:8px 0;"/></li
					><li id="button_reload" onclick="location.reload();" style="display:none;"><img src="resource/reload.png" style="margin:8px 0;"/></li
					><li id="button_back" onclick="location.reload();" style="display:none;"><img src="resource/back.png" style="margin:8px 0;"/></li
				></ul>
			</div>
		</div>


		<div id="panesCenter"
			><div id="controls_desktop">
				<table id="controls_game" class="controls_desktop">
					<tr  onclick="location.reload();">
						<td><img src="resource/reload.png"/></td><td class="l10n">restart</td>
					</tr>
					<tr  onclick="app.switchTo('scores');">
						<td><img src="resource/star.png"/></td><td class="l10n">highscores</td>
					</tr>
					<tr onclick="app.switchTo('help');">
						<td><img src="resource/question.png"/></td><td class="l10n">help</td>
					</tr>
				</table>
				<table id="controls_back" class="controls_desktop" style="display:none;">
					<tr  onclick="app.switchTo('game');">
						<td><img src="resource/back.png"/></td><td class="l10n">back</td>
					</tr>
				</table>
			</div
			><div id="paneCenter">
				<div id="screen_game"></div>
				<div id ="overlay">
					<div id="screen_over" style="display:none;">
						<h1 class="l10n">gameOver</h1>
						<p><span class="l10n">finalScore</span>:<br/><span id="finalScore"></span></p>
						<br/>
						<ul class="vmenu">
							<li onclick="location.reload();">
								<img src="resource/reload.png"/><span class="l10n">restart</span></li>
							<li onclick="app.switchTo('scores');">
								<img src="resource/star.png"/><span class="l10n">highscores</span></li>
							<li onclick="app.switchTo('help');">
								<img src="resource/question.png"/><span class="l10n">help</span></li>
						</ul>
					</div>
					<div id="screen_scoreSubmit" style="display:none;">
						<h1 class="l10n">congratulations</h1>
						<p><span class="l10n">bestScore</span>: <span id="bestScore"></span></p>
						<br/>					
						<p class="l10n">nickName</p>
						<input id="inputName" maxlength="16" />
						<ul class="vmenu">
							<li onclick="app.scoreSubmit(true);">
								<img src="resource/tick.png"/><span class="l10n">submit</span></li>
							<li onclick="app.scoreSubmit(false);">
								<img src="resource/cancel.png"/><span class="l10n">cancel</span></li>
						</ul>
					</div>
				</div>
				<div id="screen_scores" style="display:none;">
					<h2>
						<span id="screen_scores_title" class="l10n">highscores</span>
						<img class="imgbutton" style="float:right;height:24px;" src="resource/fwd.png" onclick="app.switchTo('scores');"/>
					</h2>
					<table id="tableHighscores" style="margin:0 auto;clear:both;">
						<colgroup>
							<col width="20"/>
							<col width="60"/>
							<col width="130"/>
							<col width="90"/>
						</colgroup>
						<tr>
							<th>#</th>
							<th class="l10n">score</th>
							<th class="l10n">name</th>
							<th class="l10n">date</th>
						</tr>
					</table>
				</div>
				<div id="screen_help" style="display:none;">
					<h2 class="l10n">help</h2>
					<div id="helpContent" class="l10n">helpContent</div>
				</div>			
			</div
			></div>
		
		<div id="paneBottom" class="vgradient" style="bottom:0;">
			<div id="paneBottomContent">
				<span id="ribbonBottomLeft" style="float:left"></span>
				<span id="ribbonBottomRight" style="float:right">

				</span>
			</div>
		</div></div
		><script type="text/javascript">
layout = {
	reserved: { 
		desktop: { 
			width:260, // 2 * (130) 
			height:74 // 48+2*5+16
		}, 
		mobile:{ 
			width:0, 
			height:94 // 40+50+4
		},
		overlay:{ 
			width:240, 
			height:264
		}
	},
	proportion: {
		width:11,
		height:13
	},
	scaleStep:13,
	
	init: function() {
		if(session.presentation=='desktop') {
			window.onresize = function() { layout.update(); }
			eludi.genXlinks('xlinks', cfg.name, 7);
		} else {
			window.onorientationchange = function() { 
				setTimeout(function() { layout.update(); window.scrollTo(0,-1); }, 200); 
			}
			window.scrollTo(0,-1);
			setTimeout(function() { window.scrollTo(0,-1); }, 1000);
		}
		this.update();
	},
	update: function() {
		var metrics = eludi.windowMetrics();
		var reserved = this.reserved[session.presentation];
		if(session.platform=='iOS' && !navigator.standalone && window.innerHeight<460)
			this.proportion.width = this.proportion.height = this.scaleStep = 12;

		var availWidth = metrics.innerWidth-reserved.width, availHeight = metrics.innerHeight-reserved.height;
		var factor = Math.min(availWidth / this.proportion.width, availHeight / this.proportion.height);		
		this.center_width = Math.floor(factor*this.proportion.width/this.scaleStep)*this.scaleStep;
		this.center_height = Math.floor(factor*this.proportion.height/this.scaleStep)*this.scaleStep;
		var  total_width = this.center_width+reserved.width, total_height = this.center_height+reserved.height;
		
		document.body.style.height = "100%";
		document.getElementById("paneCenter").style.width = "100%";
		document.getElementById("paneCenter").style.height = "100%";
		document.getElementById("panesCenter").style.width = "100%";
		document.getElementById("panes").style.height = "100%";
		app.layout();
	}
}
eludi.sessionRequest(function() { app.init(eludi.paramsRequest()); layout.init(); }, cfg.netTimeout, {lang:'en,de,es'});
		</script>
	</body>
</html>
